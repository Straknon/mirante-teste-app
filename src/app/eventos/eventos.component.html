<h1 class="mat-h1">Área de pesquisa de eventos</h1>
<div class="spinner-class" *ngIf="carregando">

    <mat-progress-spinner 
        mode="indeterminate"
        value="true">
    </mat-progress-spinner>

</div>

<mat-divider></mat-divider>
<form [formGroup]="form" (ngSubmit)="onSubmit()">
    <div class="button-group">
        <mat-form-field appearance="outline" style="margin-top: 20px;">
            <mat-label>Id do evento</mat-label>
            <input matInput type="text" formControlName="id" placeholder="Digite o Id do evento" />
        </mat-form-field>

        <button matFab color="primary" type="submit" class="larger-button">
            Pesquisar
        </button>

        <button matFab color="primary" (click)="novoEvento()" class="larger-button right-button">
            Novo evento
        </button>
    </div>
</form>

<table mat-table [dataSource]="eventos" class="mat-elevation-z8" *ngIf="showTable()">
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    <ng-container matColumnDef="id">
        <th mat-header-cell *matHeaderCellDef> Id </th>
        <td mat-cell *matCellDef="let evento"> {{evento.id}} </td>
    </ng-container>

    <ng-container matColumnDef="titulo">
        <th mat-header-cell *matHeaderCellDef> Titulo </th>
        <td mat-cell *matCellDef="let evento"> {{evento.titulo}} </td>
    </ng-container>

    <ng-container matColumnDef="local">
        <th mat-header-cell *matHeaderCellDef> Local </th>
        <td mat-cell *matCellDef="let evento"> {{evento.local}} </td>
    </ng-container>

    <ng-container matColumnDef="descricao">
        <th mat-header-cell *matHeaderCellDef> Descricao </th>
        <td mat-cell *matCellDef="let evento"> {{evento.descricao}} </td>
    </ng-container>

    <ng-container matColumnDef="createdAt">
        <th mat-header-cell *matHeaderCellDef> Data de Criação </th>
        <td mat-cell *matCellDef="let evento"> {{this.formatarData(evento.createdAt)}} </td>
    </ng-container>

    <ng-container matColumnDef="updatedAt">
        <th mat-header-cell *matHeaderCellDef> Data de Atualização </th>
        <td mat-cell *matCellDef="let evento"> {{this.formatarData(evento.updatedAt)}} </td>
    </ng-container>

    <ng-container matColumnDef="acao">
        <th mat-header-cell *matHeaderCellDef> Ação </th>
        <td mat-cell *matCellDef="let evento">
            <button mat-icon-button color="primary" (click)="view(evento.id)" title="Visualizar"><mat-icon>visibility</mat-icon></button>          
            <button  mat-icon-button color="primary" (click)="edit(evento.id)" title="Editar"><mat-icon>edit</mat-icon></button>
          <button mat-icon-button color="primary"  (click)="delete(evento.id)"  title="Excluir"><mat-icon>delete</mat-icon></button>
        </td>
      </ng-container>
</table>
<div *ngIf="showNenhumEventoEncontrado()" style="justify-content: center; align-self: center; display: flex; margin: 20px;">
    Nenhum evento encontrado
</div>
<mat-paginator
  [length]="totalItems"
  [pageSize]="pageSize"
  [pageSizeOptions]="[5, 10, 20]"
  (page)="handlePaginatorChange($event)"
  *ngIf="showPaginator()">
</mat-paginator>